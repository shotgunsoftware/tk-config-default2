// Python Toolbar Button this Menu Creator. Copyright 2020 Imaginary Spaces. All Rights Reserved.

#include "MenuItemIconStyle.h"
#include "Misc/AutomationTest.h"
#include "Styling/SlateStyleRegistry.h" 
#include "SpecOperators.h"

BEGIN_DEFINE_SPEC(MenuItemIconStyleSpec, "Editor.Plugins.UnrealMenuItem.MenuItemIconStyleSpec", EAutomationTestFlags::ProductFilter | EAutomationTestFlags::ApplicationContextMask)
    FString TestIconPath = TEXT("Resources/Icon128.png");
END_DEFINE_SPEC(MenuItemIconStyleSpec)

void MenuItemIconStyleSpec::Define()
{
    Describe("RegisterIcon", [this]()
    {
        It("should register a FSlateStyleSet named as the passed icon relative path", [this]()
        {
            MenuItemIconStyle::RegisterIcon(TEXT("UnrealMenuItem"), TestIconPath);
            TEST_NOT_NULL(FSlateStyleRegistry::FindSlateStyle(*TestIconPath));
        });
    });
}

#undef TEST_NOT_NULL

