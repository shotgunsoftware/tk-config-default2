// Python Toolbar Button & Menu Creator. Copyright 2020 Imaginary Spaces. All Rights Reserved.

#include "CreateToolbar.h"
#include "ToolMenus.h"

void CreateToolbar::GenerateToolbarButton(const FString& MenuID, const FString& MenuName, const FString& Tooltip, const FString& StyleSet, const FString& IconStyle, const FString& SmallIconStyle)
{
    UToolMenu* Toolbar = UToolMenus::Get()->FindMenu("LevelEditor.LevelEditorToolBar");

    FToolMenuSection& SettingsSection = Toolbar->AddSection(*MenuName);
    {
        SettingsSection.AddEntry(FToolMenuEntry::InitComboButton(
            *MenuName,
            FUIAction(),
            FOnGetContent::CreateStatic(&CreateToolbar::GenerateToolbarMenu, MenuID),
            FText::FromString(MenuName),
            FText::FromString(Tooltip),
            FSlateIcon(*StyleSet, *IconStyle, *SmallIconStyle)
        ));
    }
}

TSharedRef<SWidget> CreateToolbar::GenerateToolbarMenu(FString MenuID)
{
    return UToolMenus::Get()->GenerateWidget(*MenuID, NULL);
}
